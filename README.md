# ระบบเก็บและวิเคราะห์ข้อมูลสภาพอากาศแบบอัตโนมัติด้วย Prefect, LakeFS, และ Streamlit  
### รายวิชา DSI321: โครงสร้างพื้นฐานคอมพิวเตอร์สำหรับการประมวลผลข้อมูลขนาดใหญ่

---

## 1. ความเป็นมา

ในยุคที่ข้อมูลเป็นศูนย์กลางของการตัดสินใจ การมีระบบที่สามารถรวบรวมและวิเคราะห์ข้อมูลแบบเรียลไทม์ได้อย่างแม่นยำมีความสำคัญอย่างยิ่ง โดยเฉพาะในบริบทของสภาพอากาศซึ่งมีผลกระทบต่อกิจกรรมประจำวันและสุขภาพของประชาชน โครงงานนี้จึงมีเป้าหมายในการพัฒนาระบบ Data Pipeline สำหรับการเก็บข้อมูลสภาพอากาศจากพื้นที่ของสมาคมศิษย์เก่าสาธิตรามคำแหงและพื้นที่ใกล้เคียง 15 แห่ง โดยใช้ Prefect 3 สำหรับการควบคุม workflow, Docker สำหรับสภาพแวดล้อม, และ LakeFS สำหรับจัดเก็บข้อมูลแบบ version control

ระบบนี้จะเก็บข้อมูลจาก OpenWeatherMap API ทุก 15 นาที แปลงข้อมูลให้อยู่ในรูปแบบ Parquet และเก็บใน Data Lake ผ่าน LakeFS ก่อนนำไปแสดงผลผ่าน Streamlit Dashboard ที่ใช้งานง่าย ทั้งนี้ยังมีการประยุกต์ใช้ Machine Learning อย่าง K-means เพื่อจำแนกกลุ่มสภาพอากาศและแสดงแนวโน้มผ่าน visualization ที่เข้าใจง่าย

---

## 2. วัตถุประสงค์ของโครงการ

โครงการนี้มีวัตถุประสงค์เพื่อสร้างระบบที่ครบวงจรในการจัดเก็บ วิเคราะห์ และแสดงข้อมูลสภาพอากาศ โดยเฉพาะเพื่อ

| วัตถุประสงค์                                    | รายละเอียด                                                                                         |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------|
| พัฒนา Data Pipeline แบบอัตโนมัติ                | ใช้ Prefect 3 ควบคุมการดึงข้อมูลและ Workflow ให้เป็นระบบ และรันทุก 15 นาที                         |
| สร้างระบบจัดเก็บข้อมูลแบบ version control       | ใช้ LakeFS เพื่อให้สามารถจัดการเวอร์ชันข้อมูลและย้อนกลับได้เมื่อเกิดข้อผิดพลาด                      |
| พัฒนา Dashboard สำหรับการแสดงผลข้อมูลแบบ Interactive | ให้ผู้ใช้สามารถดูข้อมูลย้อนหลัง วิเคราะห์แนวโน้ม และกรองข้อมูลตามพื้นที่และเวลาได้อย่างสะดวก          |
| นำ Machine Learning มาวิเคราะห์และจำแนกลักษณะสภาพอากาศ | ใช้ K-Means clustering จำแนกกลุ่มสภาพอากาศ และช่วยเพิ่มบริบทเพื่อการตัดสินใจที่ดียิ่งขึ้น              |
| ส่งเสริมความรู้และทักษะด้าน Data Engineering และ Data Science | ฝึกใช้งาน Docker, Prefect, LakeFS, และ Streamlit ในโครงงานจริง                                 |

---

## 3. ประโยชน์ที่ได้รับ

| กลุ่มผู้ใช้งาน         | ประโยชน์ที่ได้รับ                                                                 |
|------------------------|----------------------------------------------------------------------------------|
| นักพัฒนา/นักวิจัย      | ได้ระบบที่สามารถเก็บข้อมูลและวิเคราะห์เชิงลึก พร้อมนำไปต่อยอดทางโมเดล ML ได้ |
| หน่วยงานท้องถิ่น       | สามารถใช้ข้อมูลเพื่อวางแผนกิจกรรมในพื้นที่ที่มีสภาพอากาศแปรปรวน             |
| นักเรียน/นักศึกษา      | เป็นแหล่งข้อมูลที่สามารถใช้ฝึกวิเคราะห์หรือศึกษาเกี่ยวกับ Data Pipeline       |

---

## 4. ตัวชี้วัดความสำเร็จของโครงการ (Key Performance Indicators)

### หมวดหมู่: ด้านเทคนิค
- ระบบ Prefect ทำงานทุก 15 นาทีโดยไม่ล้มเหลวเกิน 1% ในแต่ละวัน
- ข้อมูลถูกจัดเก็บใน LakeFS และสามารถย้อนดูเวอร์ชันได้

### หมวดหมู่: ด้านการวิเคราะห์
- ข้อมูลสามารถจำแนกกลุ่มได้อย่างน้อย 3 กลุ่มด้วย K-means
- Visualization เข้าใจง่าย มีการตีความข้อมูลที่เป็นประโยชน์

### หมวดหมู่: ด้านการใช้งาน
- Dashboard ใช้งานได้ราบรื่น ไม่มี bug ร้ายแรง
- รองรับผู้ใช้พร้อมกันได้อย่างน้อย 10 คน

### หมวดหมู่: ด้านการศึกษา
- นักศึกษาสามารถอธิบายเทคโนโลยีที่ใช้ได้ครบทุกตัว
- มีเอกสาร README และ Diagram อธิบายโครงสร้างระบบ

---

## 5. ภาพรวมแผนดำเนินโครงการ

### ระยะเวลา: 3 สัปดาห์ (ประมาณ 10–15 ชั่วโมงต่อสัปดาห์)

#### สัปดาห์ที่ 1 (28 เมษายน – 4 พฤษภาคม)
- ออกแบบโครงสร้างระบบและฐานข้อมูล
- ออกแบบ Data Architecture และ Data Flow Diagram
- สร้าง GitHub repository สำหรับ version control
- ติดตั้งและตั้งค่า Docker environment
- ออกแบบ schema สำหรับเก็บข้อมูลในรูปแบบ Parquet

> **Deliverables**  
> - Diagram ระบบ  
> - Schema Parquet  
> - Docker Compose พร้อมใช้งาน

#### สัปดาห์ที่ 2 (5 พฤษภาคม – 11 พฤษภาคม)
- พัฒนา Prefect Flow สำหรับดึงข้อมูลสภาพอากาศจาก OpenWeatherMap API
- ตั้งเวลาให้ดึงข้อมูลทุก 15 นาที
- แปลงและจัดเก็บข้อมูลใน Parquet ผ่าน LakeFS
- พัฒนา Dashboard แสดงผลด้วย Streamlit

> **Deliverables**  
> - Prefect Flow ทำงานอัตโนมัติ  
> - Dashboard Interactive  
> - GitHub repository อัปเดตโค้ดสมบูรณ์

#### สัปดาห์ที่ 3 (12 พฤษภาคม – 18 พฤษภาคม)
- ทดสอบระบบทั้ง Prefect และ Dashboard ให้ทำงานต่อเนื่อง
- เพิ่มฟีเจอร์ใน Dashboard (กราฟย้อนหลัง, ตัวกรองข้อมูล)
- จัดทำเอกสาร README, Infographic, รายงานโครงการ

> **Deliverables**  
> - ระบบใช้งานได้จริง  
> - Dashboard เสถียร  
> - README และรายงานโครงการสมบูรณ์

---

## 6. บทสรุป

โครงการนี้แสดงให้เห็นถึงศักยภาพของการนำเครื่องมือ Data Engineering มาสร้างระบบติดตามสภาพอากาศแบบอัตโนมัติ โดยครอบคลุมทั้งด้านการดึงข้อมูล การจัดเก็บ การแสดงผล และการวิเคราะห์ข้อมูลด้วย Machine Learning ซึ่งสามารถนำไปประยุกต์ใช้จริง และเป็นต้นแบบในการเรียนรู้และพัฒนาทักษะด้าน Data Science และ Data Engineering ได้เป็นอย่างดี

---

## ตัวอย่างภาพประกอบ

### 📊 Dashboard ที่พัฒนาโดย Streamlit
![streamlit_dashboard](images/streamlit_dashboard.png)

### 🧠 การจำแนกกลุ่มสภาพอากาศด้วย K-means
![kmeans_clustering](images/kmeans_result.png)

### 🔄 การตั้ง Prefect Flow
![prefect_flow](images/prefect_flow.png)

### 🧬 ระบบจัดเก็บแบบ version control ด้วย LakeFS
![lakefs_versions](images/lakefs_versions.png)
